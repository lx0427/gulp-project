<!DOCTYPE html>
<html>

<head>
    <title>信息反馈</title>
    <% include ../../components/_head.art %>

<style>
</style>

<script>
  /**
   * 文本框根据输入内容自适应高度
   * @param                {HTMLElement}        输入框元素
   * @param                {Number}                设置光标与输入框保持的距离(默认0)
   * @param                {Number}                设置最大高度(可选)
   */
  var autoTextarea = function(elem, extra, maxHeight) {
    extra = extra || 0;
    var isFirefox = !!document.getBoxObjectFor || 'mozInnerScreenX' in window,
      isOpera = !!window.opera && !!window.opera.toString().indexOf('Opera'),
      addEvent = function(type, callback) {
        elem.addEventListener ?
          elem.addEventListener(type, callback, false) :
          elem.attachEvent('on' + type, callback);
      },
      getStyle = elem.currentStyle ? function(name) {
        var val = elem.currentStyle[name];
        if (name === 'height' && val.search(/px/i) !== 1) {
          var rect = elem.getBoundingClientRect();
          return rect.bottom - rect.top -
            parseFloat(getStyle('paddingTop')) -
            parseFloat(getStyle('paddingBottom')) + 'px';
        };
        return val;
      } : function(name) {
        return getComputedStyle(elem, null)[name];
      },
      minHeight = parseFloat(getStyle('height'));
    elem.style.resize = 'none';
    var change = function() {
      var scrollTop, height,
        padding = 0,
        style = elem.style;
      if (elem._length === elem.value.length) return;
      elem._length = elem.value.length;
      if (!isFirefox && !isOpera) {
        padding = parseInt(getStyle('paddingTop')) + parseInt(getStyle('paddingBottom'));
      };
      scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
      elem.style.height = minHeight + 'px';
      if (elem.scrollHeight > minHeight) {
        if (maxHeight && elem.scrollHeight > maxHeight) {
          height = maxHeight - padding + 20;
          style.overflowY = 'auto';
        } else {
          height = elem.scrollHeight - padding + 20;
          style.overflowY = 'hidden';
        };
        style.height = height + extra + 'px';
        scrollTop += parseInt(style.height) - elem.currHeight;
        document.body.scrollTop = scrollTop;
        document.documentElement.scrollTop = scrollTop;
        elem.currHeight = parseInt(style.height);
      };
    };
    addEvent('propertychange', change);
    addEvent('input', change);
    addEvent('focus', change);
    change();
  };
</script>
</head>

<body>
<article class="wx_layout">
  <header class="wx_infofktop">
      <ul class="hy_xxsb">
    <li class="xxsb_list xxsb_list_checked" onclick="onPage(2);"><span class="typeSpan" style="background:#ffffff;color:#3e7baf;">客户拜访</span></li>
    <li class="xxsb_list" onclick="onPage(3);"><span class="typeSpan" style="">周 报</span></li>
  </ul>
  </header>
  <section class="wx_infofk">
    <div id="list">
      
    </div>
  
    <div class="bfff ssjcont toptit mt10">
      <div class="tit" id="titssj">随手记</div>
      <p>1、随手记可以帮助你记录工作中遇到的客户问题及其他相关问题，并为你及时传达和帮助解决；</p>
      <p>2、请记录要点，便于领导理解和点评；</p>
      <p>3、请根据内容选择相关标签；</p>
      <div class="xxfk_cpx" id="lable" style="padding-left: 2px;padding-top: 2px;">
        <input type="hidden" id="industry" name="industry">
              <!-- 标签 -->
              <span class="cpx_label showStyle" id="lableType" >
                <span class="ytk" style="border-radius: 16px;">逸钛康</span>
              </span>
            </div>
      <div class="ssjbox">
        <textarea class="textarea" id="problem" style="z-index: 2;position: relative;" onclick="$(this).next().hide();"></textarea>
        <div id="note" class="note" style="position: absolute; top: 177px;z-index: 1;">
          <p>请输入您的内容（不超过1000字）</p>
          <p>例如：</p>
          <p>客户名称</p>
          <p>遇到的问题：</p>
          <p>希望得到的支持：</p>
        </div>
        <div class="uploadimg">
          <ul id="img_ul" class="wx_qdphoto wx_cjht"> 
            <li id="addImg"><a class="btn" href="javascript:void(0)"><i class="iconfont">&#xe6f4;</i>添加图片</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="wx_hybluebtn mt20" onclick="doSave()">提交</div>
    <p class="c3d729e history" onclick="toHistoryList()"><i class="iconfont">&#xeab1;</i>查看历史随手记</p>
  </section>
</article>
<% include ../../_foot.html %>
<script src="../../js/oauth2.min.js"></script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script src="../informationReport/messageNoteAdd.js"></script>
<script>
    $(function(){
        wxconfig();
    });
</script>
<script id="list_page" type="text/html">
  <div class="bfff toptit" >
  <div class="tit">随手记</div>    
    <div class="wx_suggest ssjlist">
    {{each data as value i}}    
        <div class="item" onclick="toInfo('{{value.pkid}}')">
          <div class="inner">
            <div class="top">
              <div class="dt ellipsis1">{{value.problem}}<div class="slide" style="color:#333"><i class="iconfont icon-rarrow" ></i></div>
            </div>
              <div class="dd">反馈时间：{{#getDate(value.cdate,"yyyy.MM.dd HH:mm")}} | 
              {{if value.isMark != null && value.isMark == 1}} <b class="cf84d02">收到点评</b> {{/if}}
              {{if value.isMark == 0 && value.str01 == null}} <span class="">未点评</span> {{/if}}
              {{if value.isMark == 0 && value.str01 != null}}<span class="">点评人: {{value.str01}}</span> {{/if}}
              </div>
            </div>
          </div>
        </div>
    {{/each}}
  </div>
</div>

</script>
</body>
</html>
